-- -------------------------------------------------------------
-- 
-- File Name: hdl_prj\hdlsrc\combinedTxRx_ExternalMode\CombinedT_ip_src_Maximum.vhd
-- Created: 2018-02-01 13:20:09
-- 
-- Generated by MATLAB 9.3 and HDL Coder 3.11
-- 
-- -------------------------------------------------------------


-- -------------------------------------------------------------
-- 
-- Module: CombinedT_ip_src_Maximum
-- Source Path: combinedTxRx_ExternalMode/Combined TX and RX/Receiver HDL/Frame Recover/Barker Locate/Measure Phase 
-- Ambiguity/Find Max and Set Output Shift/Maximum/combinedTxRx_ExternalMode/Combined TX and RX/Receiver HDL/Frame 
-- Recover/Barker Locate/Measure Phase Ambiguity/Find Max and Set Output Shift/Maximu
-- Hierarchy Level: 6
-- 
-- -------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;
USE work.CombinedT_ip_src_Combined_TX_and_RX_pkg.ALL;

ENTITY CombinedT_ip_src_Maximum IS
  PORT( in0                               :   IN    vector_of_std_logic_vector16(0 TO 3);  -- int16 [4]
        out0                              :   OUT   std_logic_vector(31 DOWNTO 0)  -- uint32
        );
END CombinedT_ip_src_Maximum;


ARCHITECTURE rtl OF CombinedT_ip_src_Maximum IS

  -- Signals
  SIGNAL in0_signed                       : vector_of_signed16(0 TO 3);  -- int16 [4]
  SIGNAL const_idx                        : vector_of_unsigned32(0 TO 3);  -- uint32 [4]
  SIGNAL combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_treestage1_isgreater : std_logic_vector(0 TO 1);  -- boolean [2]
  SIGNAL combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_val : vector_of_signed16(0 TO 1);  -- int16 [2]
  SIGNAL combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_idx : vector_of_unsigned32(0 TO 1);  -- uint32 [2]
  SIGNAL combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage2_idx : unsigned(31 DOWNTO 0);  -- uint32

BEGIN
  outputgen: FOR k IN 0 TO 3 GENERATE
    in0_signed(k) <= signed(in0(k));
  END GENERATE;

  const_idx(0) <= to_unsigned(0, 32);
  const_idx(1) <= to_unsigned(1, 32);
  const_idx(2) <= to_unsigned(2, 32);
  const_idx(3) <= to_unsigned(3, 32);

  ---- Tree max implementation ----
  ---- Tree max stage 1 ----
  
  combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_treestage1_isgreater(0) <= '1' WHEN in0_signed(0) >= in0_signed(1) ELSE
      '0';
  
  combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_val(0) <= in0_signed(0) WHEN combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_treestage1_isgreater(0) = '1' ELSE
      in0_signed(1);
  
  combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_idx(0) <= const_idx(0) WHEN combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_treestage1_isgreater(0) = '1' ELSE
      const_idx(1);
  
  combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_treestage1_isgreater(1) <= '1' WHEN in0_signed(2) >= in0_signed(3) ELSE
      '0';
  
  combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_val(1) <= in0_signed(2) WHEN combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_treestage1_isgreater(1) = '1' ELSE
      in0_signed(3);
  
  combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_idx(1) <= const_idx(2) WHEN combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_treestage1_isgreater(1) = '1' ELSE
      const_idx(3);

  ---- Tree max stage 2 ----
  
  combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage2_idx <= combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_idx(0) WHEN combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_val(0) >= combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_val(1) ELSE
      combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage1_idx(1);

  out0 <= std_logic_vector(combinedTxRx_ExternalMode_Combined_TX_and_RX_Receiver_HDL_Frame_Recover_Barker_Locate_Measure_Phase_Ambiguity_Find_Max_and_Set_Output_Shift_Maximum_stage2_idx);

END rtl;

